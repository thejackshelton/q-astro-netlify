var r=e=>o=>o;function s(e){let o=[];if(e){for(let t of e)if(t){if(Array.isArray(t)){o.push(...s(t));continue}t instanceof Promise||o.push(t.name)}}return o}var a=r("astro:config:setup")(({config:e},{plugin:o})=>{if(!o||o instanceof Promise)return!1;let t=new Set(s(e?.vite?.plugins)),i=new Set;if(typeof o=="string"&&i.add(o),typeof o=="object")if(Array.isArray(o)){let n=new Set(s(o));for(let f of n)i.add(f)}else i.add(o.name);return[...i].some(n=>t.has(n))});var l=r("astro:config:setup")((e,{plugin:o,warnDuplicated:t=!0})=>{let{updateConfig:i,logger:n}=e;t&&a(e,{plugin:o})&&n.warn(`The Vite plugin "${o.name}" is already present in your Vite configuration, this plugin may not behave correctly.`),i({vite:{plugins:[o]}})});export{l as addVitePlugin};
//# sourceMappingURL=add-vite-plugin.js.map